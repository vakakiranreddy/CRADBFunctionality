<div class="container-fluid" style="padding: 0;">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-start mb-4" style="padding: 0 15px 20px 15px;">
    <div>
      <h2 class="h3 mb-1" style="font-weight: 600;">Welcome, {{ getUserDisplayName() }}!</h2>
      <p class="text-muted mb-0" style="font-size: 14px;">View complete details of all location and its corresponding
        details.</p>
    </div>
    <div class="position-relative">
      <div class="d-flex align-items-center gap-2" (click)="toggleProfileDropdown()" style="cursor: pointer;">
        <div class="rounded-circle bg-dark text-white d-flex align-items-center justify-content-center"
          style="width: 35px; height: 35px;">
          <span style="font-size: 14px;">{{ getUserInitials() }}</span>
        </div>
        <span style="font-size: 14px; font-weight: 500;">{{ getUserRole() }}</span>
        <i class="fas fa-chevron-down" style="font-size: 12px;"></i>
      </div>

      @if (showProfileDropdown) {
      <div class="dropdown-menu show position-absolute"
        style="right: 0; top: 100%; margin-top: 8px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
        <a class="dropdown-item" routerLink="/profile" style="padding: 8px 16px;">
          <i class="fas fa-user me-2"></i>Profile
        </a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" (click)="logout()" style="padding: 8px 16px; cursor: pointer;">
          <i class="fas fa-sign-out-alt me-2"></i>Logout
        </a>
      </div>
      }
    </div>
  </div>

  <!-- Location Selector -->
  <div class="mb-4" style="max-width: 200px; padding: 0 15px;">
    <select class="form-select" (change)="onLocationChange($event)" style="border-radius: 8px;">
      <option value="">Chennai</option>
      @for (location of locations; track location.LocationId) {
      <option [value]="location.LocationId">{{ location.Name }}</option>
      }
    </select>
  </div>

  <div class="row" style="padding: 0 15px;">
    <!-- Left Column -->
    <div class="col-lg-8">
      <!-- Occupancy Cards -->
      <div class="row mb-4">
        <div class="col-md-6 mb-3">
          <div class="card" style="border: 1px solid #e0e0e0; border-radius: 16px; background: white;">
            <div class="card-body p-4">
              <div class="d-flex align-items-start justify-content-between">
                <div>
                  <h5 class="mb-2" style="font-weight: 600; color: #333;">Rooms</h5>
                  <div class="mb-2">
                    <h6 class="mb-2" style="font-weight: 600;">Busy ({{ stats.busyRooms }}/{{ stats.totalRooms }})</h6>
                    <div class="progress" style="height: 4px; border-radius: 10px;">
                      <div class="progress-bar" [style.width.%]="(stats.busyRooms / stats.totalRooms) * 100"
                        style="background: linear-gradient(90deg, #FF6B6B 0%, #FF8E8E 100%); border-radius: 10px;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="p-2" style="background: #FFE8E8; border-radius: 8px;">
                  <i class="fas fa-users" style="font-size: 20px; color: #FF6B6B;"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <div class="card" style="border: 1px solid #e0e0e0; border-radius: 16px; background: white;">
            <div class="card-body p-4">
              <div class="d-flex align-items-start justify-content-between">
                <div>
                  <h5 class="mb-2" style="font-weight: 600; color: #333;">Desks</h5>
                  <div class="mb-2">
                    <h6 class="mb-2" style="font-weight: 600;">Occupied ({{ stats.occupiedDesks }}/{{ stats.totalDesks
                      }})</h6>
                    <div class="progress" style="height: 4px; border-radius: 10px;">
                      <div class="progress-bar" [style.width.%]="(stats.occupiedDesks / stats.totalDesks) * 100"
                        style="background: linear-gradient(90deg, #4CAF50 0%, #66BB6A 100%); border-radius: 10px;">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="p-2" style="background: #FFF9E6; border-radius: 8px;">
                  <i class="fas fa-laptop" style="font-size: 20px; color: #FFA726;"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- All Services -->
      <div class="mb-4">
        <h5 class="mb-3" style="font-weight: 600;">All Services</h5>
        <div class="row g-3">
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/employees"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #FFE8E8; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-user-tie" style="font-size: 28px; color: #FF6B6B;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Employee Data</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/rooms"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #E3F2FD; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-door-open" style="font-size: 28px; color: #42A5F5;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Room Booking</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/desks"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #F3E5F5; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-chair" style="font-size: 28px; color: #AB47BC;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Desk Booking</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center position-relative"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;"
              (click)="toggleBookingDropdown()">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #FFF3E0; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-calendar-check" style="font-size: 28px; color: #FFA726;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Bookings</p>
              </div>
              @if (showBookingDropdown) {
              <div class="dropdown-menu show position-absolute"
                style="top: 100%; left: 0; right: 0; margin-top: 8px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000;">
                <a class="dropdown-item" (click)="filterBookings('room')" style="padding: 8px 16px; cursor: pointer;">
                  <i class="fas fa-door-open me-2"></i>Room Bookings
                </a>
                <a class="dropdown-item" (click)="filterBookings('desk')" style="padding: 8px 16px; cursor: pointer;">
                  <i class="fas fa-chair me-2"></i>Desk Bookings
                </a>
                <a class="dropdown-item" (click)="filterBookings('my')" style="padding: 8px 16px; cursor: pointer;">
                  <i class="fas fa-user me-2"></i>My Bookings
                </a>
              </div>
              }
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/events"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #E8F5E9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-calendar-alt" style="font-size: 28px; color: #66BB6A;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Events</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/notifications"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #FFF9C4; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-bell" style="font-size: 28px; color: #FDD835;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Notifications</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/locations"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #E3F2FD; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-map-marker-alt" style="font-size: 28px; color: #42A5F5;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Locations</p>
              </div>
            </div>
          </div>
          <div class="col-6 col-md-4 col-lg-3">
            <div class="card text-center" routerLink="/admin/resources"
              style="border: 1px solid #e0e0e0; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
              <div class="card-body p-4">
                <div class="mb-3"
                  style="width: 60px; height: 60px; background: #FFEBEE; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                  <i class="fas fa-building" style="font-size: 28px; color: #EF5350;"></i>
                </div>
                <p class="mb-0" style="font-size: 14px; font-weight: 500;">Conference Rooms</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="col-lg-4">
      <!-- Calendar -->
      <div class="card mb-4" style="border: 1px solid #e0e0e0; border-radius: 12px;">
        <div class="card-body p-3">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <button class="btn btn-sm btn-link text-dark" (click)="previousMonth()">
              <i class="fas fa-chevron-left"></i>
            </button>
            <h6 class="mb-0" style="font-weight: 600;">{{ currentMonthYear }}</h6>
            <button class="btn btn-sm btn-link text-dark" (click)="nextMonth()">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>

          <!-- Calendar Grid -->
          <div class="calendar-grid">
            <div class="row g-1 text-center mb-2">
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">SUN</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">MON</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">TUE</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">WED</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">THU</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">FRI</div>
              <div class="col" style="font-size: 11px; font-weight: 600; color: #999;">SAT</div>
            </div>

            @for (week of calendarWeeks; track $index) {
            <div class="row g-1 mb-1">
              @for (day of week; track $index) {
              <div class="col">
                <div class="calendar-day text-center py-2 position-relative" [class.current-day]="day.isToday"
                  [class.other-month]="!day.isCurrentMonth" [class.has-event]="day.hasEvent"
                  [class.has-booking]="day.hasBooking" (click)="onDateClick(day)"
                  style="cursor: pointer; border-radius: 8px; font-size: 13px; transition: all 0.2s;">
                  {{ day.date }}
                  <div class="position-absolute bottom-0 start-50 translate-middle-x d-flex gap-1"
                    style="margin-bottom: 2px;">
                    @if (day.hasEvent) {
                    <span style="width: 4px; height: 4px; background: #667eea; border-radius: 50%;"></span>
                    }
                    @if (day.hasBooking) {
                    <span style="width: 4px; height: 4px; background: #10b981; border-radius: 50%;"></span>
                    }
                  </div>
                </div>
              </div>
              }
            </div>
            }
          </div>
        </div>
      </div>

      <!-- Today's Events -->
      <div class="card" style="border: 1px solid #e0e0e0; border-radius: 12px;">
        <div class="card-body p-3">
          <h6 class="mb-3" style="font-weight: 600;">Today, {{ todayDate }}</h6>

          @if (todayEvents.length === 0) {
          <div class="text-center text-muted py-4">
            <i class="fas fa-calendar-times fa-2x mb-2"></i>
            <p class="mb-0" style="font-size: 14px;">No events today</p>
          </div>
          }

          @for (event of todayEvents; track event.EventId) {
          <div class="mb-3 p-3" [style.background]="event.bgColor"
            [style.border-left]="'3px solid ' + event.borderColor" style="border-radius: 10px;">
            <div class="d-flex align-items-start gap-2">
              <div [style.background]="event.iconBg"
                style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i [class]="'fas fa-' + event.icon" style="color: white; font-size: 14px;"></i>
              </div>
              <div class="flex-grow-1">
                <p class="mb-1" [style.color]="event.titleColor" style="font-size: 13px; font-weight: 500;">{{
                  event.EventTitle }}</p>
                <p class="mb-0" [style.color]="event.timeColor" style="font-size: 11px;">{{ event.StartTime }} - {{
                  event.EndTime }}</p>
              </div>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
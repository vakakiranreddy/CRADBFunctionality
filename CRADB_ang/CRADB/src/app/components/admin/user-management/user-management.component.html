<div class="user-management-container">
  <div class="d-flex justify-content-between align-items-start mb-4">
    <div>
      <h2 class="h3 mb-1" style="font-weight: 600;">User Management</h2>
      <p class="text-muted mb-0" style="font-size: 14px;">Manage user accounts and roles.</p>
    </div>
    <div class="position-relative">
      <div class="d-flex align-items-center gap-2" (click)="toggleProfileDropdown()" style="cursor: pointer;">
        <div class="rounded-circle bg-dark text-white d-flex align-items-center justify-content-center" style="width: 35px; height: 35px;">
          <span style="font-size: 14px;">{{ getUserInitials() }}</span>
        </div>
        <span style="font-size: 14px; font-weight: 500;">{{ getUserRole() }}</span>
        <i class="fas fa-chevron-down" style="font-size: 12px;"></i>
      </div>
      
      @if (showProfileDropdown) {
        <div class="dropdown-menu show position-absolute" style="right: 0; top: 100%; margin-top: 8px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
          <a class="dropdown-item" routerLink="/profile" style="padding: 8px 16px;">
            <i class="fas fa-user me-2"></i>Profile
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" (click)="logout()" style="padding: 8px 16px; cursor: pointer;">
            <i class="fas fa-sign-out-alt me-2"></i>Logout
          </a>
        </div>
      }
    </div>
  </div>
  
  <div class="actions">
    <button (click)="showCreateForm = !showCreateForm" class="btn-primary">
      {{showCreateForm ? 'Cancel' : 'Add New User'}}
    </button>
    <input type="text" placeholder="Search users..." (input)="searchUsers($event)" class="search-input">
  </div>

  <div class="users-list">
    <h3>Users ({{users.length}})</h3>
    <div class="users-table">
      <div class="table-header">
        <span>Employee ID</span>
        <span>Name</span>
        <span>Email</span>
        <span>Role</span>
        <span>Status</span>
        <span>Actions</span>
      </div>
      <div class="table-row" *ngFor="let user of users">
        <span>{{user.EmployeeId}}</span>
        <span>{{user.FirstName}} {{user.LastName}}</span>
        <span>{{user.Email}}</span>
        <span class="role" [class]="user.Role.toLowerCase()">
          {{user.Role}}
        </span>
        <span [class]="user.IsActive ? 'active' : 'inactive'">
          {{user.IsActive ? 'Active' : 'Inactive'}}
        </span>
        <span class="actions">
          <button (click)="changeRole(user)" class="btn-secondary">Change Role</button>
          <button (click)="deleteUser(user.Id)" class="btn-danger" [disabled]="deleting">
            Delete
          </button>
        </span>
      </div>
    </div>
  </div>
</div>